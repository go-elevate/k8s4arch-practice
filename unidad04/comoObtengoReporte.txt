Aplico el manifiesto de creación del job:

$ kubectl apply -f jobHotelReport.yaml 
cronjob.batch/pda-job-hoteles-report created

Creo un job manual para ejecutarlo ahora:

$ kubectl create job manual-repo --from=cronjob/pda-job-hoteles-report
job.batch/manual-repo created




Para ver el log del job finalizado pido el describe del job manual y veo en events el nombre del pod que ejecutó

$ kubectl describe job manual-repo
Name:           manual-repo
Namespace:      pda-hoteles
Selector:       controller-uid=40974699-553c-4b0b-a83d-28c8f44ef94e
Labels:         controller-uid=40974699-553c-4b0b-a83d-28c8f44ef94e
                job-name=manual-repo
Annotations:    cronjob.kubernetes.io/instantiate: manual
Parallelism:    1
Completions:    1
Start Time:     Sat, 24 Apr 2021 15:43:08 -0300
Completed At:   Sat, 24 Apr 2021 15:43:10 -0300
Duration:       2s
Pods Statuses:  0 Running / 1 Succeeded / 0 Failed
Pod Template:
  Labels:  controller-uid=40974699-553c-4b0b-a83d-28c8f44ef94e
           job-name=manual-repo
  Containers:
   pda-dep-hmonov2-cont:
    Image:      ghcr.io/go-elevate/k8s4arch-hotels-backend:slim
    Port:       <none>
    Host Port:  <none>
    Command:
      python
    Args:
      report.py
    Environment:  <none>
    Mounts:       <none>
  Volumes:        <none>
Events:
  Type    Reason            Age    From            Message
  ----    ------            ----   ----            -------
  Normal  SuccessfulCreate  3m18s  job-controller  Created pod: manual-repo-m8qzt
  Normal  Completed         3m16s  job-controller  Job completed




Veo el log del pod del job manual y obtengo el reporte.

$ kubectl logs  manual-repo-m8qzt
Hotel Entre Cielos had 15 reservations. Hotel is at 93.75% of its full capacity
Hotel Casa Turquesa had 8 reservations. Hotel is at 88.88888888888889% of its full capacity
Hotel Hotel Huacalera had 25 reservations. Hotel is at 78.125% of its full capacity
Hotel Luma Casa de Montaña had 4 reservations. Hotel is at 50.0% of its full capacity
Hotel Alto Atacama had 7 reservations. Hotel is at 16.666666666666664% of its full capacity

